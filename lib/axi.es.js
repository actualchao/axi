/* Axi version: 1.0.0 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(){return(t=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function n(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function e(t){if(P(t,"object"))return"";var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t+"");return n?n[1]||"":void 0}function r(t,n){if(n in t.style){var e=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return t.style[n]||getComputedStyle(t).getPropertyValue(e)||"0"}return"0"}function i(n,e){var r=t({},n);for(var i in n)r[i]=e.hasOwnProperty(i)?e[i]:n[i];return r}function o(t,n,e){return Math.min(Math.max(t,n),e)}var a=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"];function s(t,n){return t.getAttribute(n)}function u(t){if(!f(t))return{};for(var n,e=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i={};n=r.exec(e);)i[n[1]]=n[2];return i}function c(t,n){var e=g(n,"scale")?1:0+function(t){if(g(t,"translate")||"perspective"===t)return"px";if(g(t,"rotate")||g(t,"skew"))return"deg"}(n);return u(t)[n]||e}var h={css:function(t,n,e){t.style[n]=e},attribute:function(t,n,e){t.setAttribute(n,e)},object:function(t,n,e){t[n]=e},transform:function(t,n,e,r){r[n]=e;var i="";Object.keys(r).forEach((function(t){i+=t+"("+r[t]+") "})),t.style.transform=i}},p=function(t){return t instanceof SVGElement};function f(t){return t.nodeType||p(t)}var d=function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},l=function(t){return/^hsl/.test(t)},m=function(t){return/^rgb/.test(t)},y=function(t,n,e,r){return"rgba("+t+", "+n+", "+e+", "+r+")"},v=function(t){if(d(t))return function(t){var n=t.replace(/^#([A-F\d])([A-F\d])([A-F\d])$/i,(function(t,n,e,r){return n+n+e+e+r+r})),e=/^#?([A-F\d]{2})([A-F\d]{2})([A-F\d]{2})$/i.exec(n),r=(e[0],e[1]),i=e[2],o=e[3];return y(parseInt(r,16),parseInt(i,16),parseInt(o,16),1)}(t);if(l(t))return function(t){var n,e,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,u=i[4]||1;function c(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(n-t)*e:e<.5?n:e<2/3?t+(n-t)*(2/3-e)*6:t}if(0==a)n=e=r=s;else{var h=s<.5?s*(1+a):s+a-s*a,p=2*s-h;n=c(p,h,o+1/3),e=c(p,h,o),r=c(p,h,o-1/3)}return y(255*n,255*e,255*r,u)}(t);if(m(t))return function(t){var n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return n?"rgba("+n[1]+", 1)":t}(t);throw new Error("Please set the correct color(rgb, rgba, hex, hsl).")};function g(t,n){return t.indexOf(n)>-1}function w(t,n){var e=t.x-n.x,r=t.x-n.y;return Math.sqrt(e*e+r*r)}function A(t){var e=n(t.points),r=e.length;return e.reduce((function(t,n,i){return i===r-1?t+0:t+w(n,e[i+1])}),0)}function x(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":!function(t){Math.PI,s(t,"r")}(t);case"rect":!function(t){s(t,"width"),s(t,"height")}(t);case"line":!function(t){w({x:+s(t,"x1"),y:+s(t,"y1")},{x:+s(t,"x2"),y:+s(t,"y2")})}(t);case"polyline":A(t);case"polygon":!function(t){var e=n(t.points);A(t),w(e[0],e[e.length-1])}(t)}}var b=["path","circle","rect","line","polyline","polygon"],E="The motion path node can only be one of (path, circle, rect, line, polyline, polygon).";function O(t){var n=t.tagName.toLowerCase();return b.includes(n)}var T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},M=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout;function P(t,n){return Object.prototype.toString.call(t).toLowerCase()==="[object "+n+"]"}var C={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circle:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return 2.70158*Math.pow(t,3)-1.70158*t*t}},Bounce:function(){return function(t){for(var n,e=4;t<((n=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*n-2)/22-t,2)}},Quad:function(){return function(t){return Math.pow(t,2)}},Cubic:function(){return function(t){return Math.pow(t,3)}},Quart:function(){return function(t){return Math.pow(t,4)}},Quint:function(){return function(t){return Math.pow(t,5)}},Expo:function(){return function(t){return Math.pow(2,10*(t-1))}},Elastic:function(t,n){void 0===t&&(t=1),void 0===n&&(n=.5);var e=o(t,1,10),r=o(n,.1,2);return function(t){return 0===t||1===t?t:-e*Math.pow(2,10*(t-1))*Math.sin((t-1-r/(2*Math.PI)*Math.asin(1/e))*(2*Math.PI)/r)}}},L={linear:function(){return function(t){return t}}},k=function(t){var n=C[t];L["easeIn"+t]=n,L["easeOut"+t]=function(t,e){return function(r){return 1-n(t,e)(1-r)}},L["easeInOut"+t]=function(t,e){return function(r){return r<.5?n(t,e)(2*r)/2:1-n(t,e)(-2*r+2)/2}}};for(var S in C)k(S);var F={delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",duration:1e3,autoPlay:!0,loop:!1,direction:"normal",round:!1},I={axiStart:function(){},axiEnd:function(){},loopStart:function(){},loopEnd:function(){},updateStart:function(){},updateEnd:function(){}};function R(t){return"target"!==t&&!F.hasOwnProperty(t)&&!I.hasOwnProperty(t)}function q(t){return function(t){return g(Object.prototype.toString.call(t),"Object")}(t)&&t.hasOwnProperty("totalLength")}function j(t){var n=t.split("(")[0],e=L[n],r=/\(([^)]+)\)/.exec(t),i=r?r[1].split(",").map(parseFloat):[];return e.apply(null,i)}function B(t,n){var e=((q(t)?t.totalLength:t)+"").match(/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g);return{original:t,number:e?+e[0]:0,unit:n}}function D(t){var n=v(t);return{original:n,number:n.match(/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g).map(Number),unit:""}}function V(t,n){return t.getPointAtLength(n>=1?n:0)}function $(t){var n=function(t){for(var n=t.parentNode;!p(n);)n=n.parentNode;return n}(t),e=n.getBoundingClientRect(),r=e.width,i=e.height,o=s(n,"viewBox"),a=o&&o.split(" ").map((function(t){return+t}))||[0,0,r,i];return{el:n,x:a[0],y:a[1],xScale:r/a[2],yScale:i/a[3]}}function H(t,n){return"function"==typeof t?t.apply(void 0,n):null!=t?t:void 0}var N=function(){function n(t){this.curTime=0,this.lastTime=0,this.duration=0,this.paused=!0,this.reversed=!1,this.isPausedByBrowserHidden=!1,this.axiStarted=!1,this.axiEnded=!1,this.options=t,this.setAnimationOpts(t),this.setReversed(),this.setRestLoopCount(),this.setHooks(t),this.setAnimationEles(),this.setAnimationKeys(t),this.createAnimations(),this.registerVisibilityEvent(),this.getTotalDuration(),this.animationOpts.autoPlay&&(this.newLoop(),this.execute(),this.paused=!1)}return n.prototype.getTotalDuration=function(){this.duration=Math.max.apply(Math,this.animations.map((function(t){return t.tweens.reduce((function(t,n){return t+n.delay+n.duration+n.endDelay}),0)})))},n.prototype.registerVisibilityEvent=function(){var t=this;document.addEventListener("visibilitychange",(function(){document.hidden&&!t.paused&&(t.isPausedByBrowserHidden=!0,t.pause()),!document.hidden&&t.isPausedByBrowserHidden&&(t.isPausedByBrowserHidden=!1,t.play())}))},n.prototype.setAnimationKeys=function(t){var n=[];for(var e in t)R(e)&&n.push(e);this.animationKeys=n},n.prototype.setAnimationEles=function(){var t=this.options.target;t=Array.isArray(t)?t:[t],this.targets=[].concat.apply([],t.map((function(t){return P(t,"string")?Array.from(document.querySelectorAll(t)):t})))},n.prototype.setAnimationOpts=function(t){this.animationOpts=i(F,t)},n.prototype.setReversed=function(){var t=this.animationOpts.direction;this.reversed="reverse"===t},n.prototype.setRestLoopCount=function(){var t=this.animationOpts,n=t.direction,e=t.loop;this.restLoopCount="number"==typeof e?e:e?-1:"alternate"===n?2:1},n.prototype.setHooks=function(t){this.hooks=i(I,t)},n.prototype.createAnimations=function(){var t=[].concat.apply([],this.targets.map(this.createAnimationsOfEl.bind(this)));this.animations=t},n.prototype.createAnimationsOfEl=function(t,n,e){var i=this,o=f(t)?u(t):{},c=[t,n,e.length],h=this.animationOpts,p=h.delay,d=h.endDelay,l=h.easing,m=h.duration,y=h.round,v=H(p,c),g=H(d,c),w=H(l,c),A=H(m,c);return this.animationKeys.map((function(n){var e=function(t,n){if(f(t)){if(e=n,a.some((function(t){return t===e})))return"transform";if("transform"!==n&&r(t,n))return"css";if(s(t,n))return"attribute"}var e;if(null!==t[n])return"object"}(t,n),u={delay:v,endDelay:g,duration:A,easing:w},h=i.createTweensOfAnimation(u,e,n,c);return{target:t,tweens:h,type:e,round:y,prop:n,transformCache:o}}))},n.prototype.createTweensOfAnimation=function(t,n,i,o){var a,u=this,h=this.parsePropVal(i,o),p=function(t,n,e){switch(t){case"transform":return c(n,e);case"css":return r(n,e);case"attribute":return s(n,e);default:return n[e]||0}}(n,o[0],i),f=e(p),y=h.length,v=t.duration/y,g=0;return h.map((function(n,r){var o=h[r],s=o.delay,c=o.endDelay,y=o.duration,w=void 0===y?v:y,A=o.easing,x=void 0===A?t.easing:A,b=Array.isArray(o.value)?o.value[1]:o.value,E=Array.isArray(o.value)?o.value[0]:null!=a?a:p;a=b,0===r&&void 0===s&&(s=t.delay),r===h.length&&void 0===c&&(c=t.endDelay),s=null!=s?s:0,c=null!=c?c:0;var O,T,M,P=d(O=b)||l(O)||m(O);P?(T=D(E),M=D(b)):(T=B(E,e(E)||f),M=B(b,e(b)||f));var C=g,L=C+s+c+w;g=L;var k=q(u.options[i]);return{value:u.options[i],easing:j(x),start:C,end:L,duration:w,isPath:k,isColor:P,delay:s,endDelay:c,from:T,to:M}}))},n.prototype.parsePropVal=function(n,e){var r=H(this.options[n],e);return Array.isArray(r)&&2===r.length&&"object"!=typeof r[0]&&(r={value:r}),(r=Array.isArray(r)?r:[r]).map((function(n){return t(t({},"object"==typeof n?n:{value:n}),{delay:H(n.delay,e),endDelay:H(n.endDelay,e),duration:H(n.duration,e),easing:H(n.easing,e)})}))},n.prototype.execute=function(){this.rafId=T(this.animationStep.bind(this))},n.prototype.animationStep=function(t){var n=this.calcProgressT(t);this.hooks.updateStart(),this.runAnimations(n),this.hooks.updateEnd(),this.checkEnding(n),this.paused||this.execute()},n.prototype.calcProgressT=function(t){this.startTime||(this.startTime=t);var n=t-this.startTime+this.lastTime;return this.curTime=n,this.reversed?this.duration-n:n},n.prototype.runAnimations=function(t){var n=this;this.animations.forEach((function(e){var r=e.tweens.filter((function(n){return t<=n.end}))[0];if(r){var i,a=o(t-r.delay-r.start,0,r.duration)/r.duration,s=r.easing(a);i=r.isColor?function(t,n,e){for(var r=[],i=0;i<t.length;i++)r.push((n[i]-t[i])*e+t[i]);return y(r[0],r[1],r[2],r[3])}(r.from.number,r.to.number,s):r.isPath?function(t,n){var e=t.prop,r=t.el,i=t.svg,o=t.totalLength*n,a=V(r,o),s=V(r,o-1),u=V(r,o+1);switch(e){case"x":return a.x-i.x;case"y":return a.y-i.y;case"angle":return 180*Math.atan2(u.y-s.y,u.x-s.x)/Math.PI}}(r.value,s):n.getEasedValOfTween(r,s),e.round&&!r.isColor&&(i=Math.round(i)),r.to.unit&&(i+=r.to.unit);var u="transform"===e.type?e.transformCache:null;h[e.type](e.target,e.prop,i,u)}}))},n.prototype.getEasedValOfTween=function(t,n){var e=t.from.number;return e+(t.to.number-e)*n},n.prototype.checkEnding=function(t){(this.reversed?t<=0:t>=this.duration)&&(this.hooks.loopEnd(),this.restLoopCount>0||-1===this.restLoopCount?("alternate"===this.animationOpts.direction&&(this.reversed=!this.reversed),this.newLoop()):(this.paused=!0,this.axiEnded=!0,this.hooks.axiEnd()))},n.prototype.pause=function(){this.paused||(M(this.rafId),this.paused=!0,this.startTime=0,this.lastTime=this.curTime)},n.prototype.play=function(){this.paused&&(this.paused=!1,this.execute())},n.prototype.restart=function(){this.setReversed(),this.setRestLoopCount(),this.paused=!1,this.lastTime=0,this.axiStarted=!1,this.axiEnded=!1,this.newLoop(),this.execute()},n.prototype.seek=function(t){var n=t*this.duration;this.runAnimations(n)},n.prototype.newLoop=function(){this.restLoopCount>0&&this.restLoopCount--,this.axiStarted||(this.axiStarted=!0,this.axiEnded=!1,this.hooks.axiStart()),this.hooks.loopStart(),this.lastTime=0,this.startTime=0,this.curTime=0},n.prototype.reverse=function(){this.reversed=!this.reversed,this.restart()},n.getMotionPath=function(t){var n=function(t){if(P(t,"string")){for(var n=0,e=document.querySelectorAll(t);n<e.length;n++){var r=e[n];if(O(r))return r}throw new Error(E)}if(O(t))return t;throw new Error(E)}(t);return function(t){return{prop:t,el:n,svg:$(n),totalLength:x(n)}}},n.setPathDashArray=function(t){var n=x(t);return t.setAttribute("stroke-dasharray",n),n},n}();export default N;
/* Contribute to axi: https://github.com/shenyiling/axi */
